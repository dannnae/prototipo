<!DOCTYPE html>
<html lang="es">
<head>
    {% load django_bootstrap5 %}
    {% bootstrap_css %}
    {% bootstrap_javascript %}
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    {% bootstrap_messages %}
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <meta charset="UTF-8">
    <title>Agendar Cita</title>
</head>
<body>
    <h1>Agendar Cita</h1>
    {{ form.media }} 
    <form method="post">
        {% csrf_token %}
        {% bootstrap_form form %}
        <input type="submit" class="btn btn-primary" value="Buscar Disponibilidad">
    </form>
</body>
</html>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const disponibilidadDias = JSON.parse('{{ disponibilidadDias|escapejs }}');

        $('#id_fechaHora').datetimepicker({
            daysOfWeekDisabled: disponibilidadDias,
            disabledTimeIntervals: [
                [moment({ h: 0 }), moment({ h: 8 })], 
                [moment({ h: 18 }), moment({ h: 24 })]
            ]
        });
    });
</script>